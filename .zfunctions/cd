if (( $+2 )); then
    builtin cd "$@"
else
    if [[ -f $1 ]]; then
        builtin cd $1:h
    elif [[ $1 = :/ ]]; then
        builtin cd "$(git rev-parse --show-toplevel)"
    else
        builtin cd $1
    fi
fi

# vim: ft=zsh
